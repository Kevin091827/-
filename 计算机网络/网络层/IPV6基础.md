# 一，IPV6出现原因？

我们都知道IP地址是互联网中主机的唯一标识，IP也是互联网中的核心协议，但是现在使用IPV4是20世纪70年代末期设计的，到如今IPV4地址已经耗尽，也就是说不能再分配新的IP地址块，因此需要解决这个问题，才有了IPV6，我们老师说，地球上沙子的数量相当于IPV6地址的数量，可见，这数量之多，但是未来或许也会面临同样的危机，这就不在我们思考的范围内了

IPV6是具有更大空间地址的新版本IP

# 二，IPV6

## 报文格式

![](https://gss1.bdstatic.com/9vo3dSag_xI4khGkpoWK1HF6hhy/baike/c0%3Dbaike80%2C5%2C5%2C80%2C26/sign=0e7c794b3dfae6cd18b9a3336eda6441/eaf81a4c510fd9f94e7dcd152d2dd42a2834a460.jpg)

## IPV6和IPV4的区别

IPV6所引进的主要变化：

* 更大的地址空间，IPV4是32位，IPV6是128位

* 地址层次结构得到扩展，因为IPV6长度增大，所以可以划分更大的层次

* 灵活的首部格式，IPV6首部和IPV4首部不兼容，且IPV6定义了很多可选的扩展首部，不仅可以提供比IPV4更多的功能，还可以提高路由器的处理效率，路由器对扩展首部不处理

* IPV6首部长度固定，选项放在有效负载中，IPV4则相反

* IPV6可以允许协议扩展

* IPV6取消了检验和字段，增加了路由器处理效率

* TTL改为跳数限制



## 表示方法

#### 一、冒分十六进制表示法
　　格式为X:X:X:X:X:X:X:X，其中每个X表示地址中的16b，以十六进制表示，例如：

　　ABCD:EF01:2345:6789:ABCD:EF01:2345:6789

　　这种表示法中，每个X的前导0是可以省略的，例如：

　　2001:0DB8:0000:0023:0008:0800:200C:417A→ 
2001:DB8:0:23:8:800:200C:417A

#### 二、0位压缩表示法
　　在某些情况下，一个IPv6地址中间可能包含很长的一段0，可以把连续的一段0压缩为“::”。但为保证地址解析的唯一性，地址中”::”只能出现一次，例如：

　　FF01:0:0:0:0:0:0:1101 → FF01::1101

　　0:0:0:0:0:0:0:1 → ::1

　　0:0:0:0:0:0:0:0 → ::

#### 三、内嵌IPv4地址表示法
　　为了实现IPv4-IPv6互通，IPv4地址会嵌入IPv6地址中，此时地址常表示为：
X:X:X:X:X:X:d.d.d.d，前96b采用冒分十六进制表示，而最后32b地址则使用IPv4的点分十进制表示，例如::192.168.0.1与::FFFF:192.168.0.1就是两个典型的例子，注意在前96b中，压缩0位的方法依旧适用。

## IPV6地址类型分类

**1.单播**

点对点通信

**2.多播**

一对多广播通信

**3.任播**

一组计算机，但是数据报只交付给其中的一个，且通常是距离最近的一个

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190521004015539.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTkyMjI4OQ==,size_16,color_FFFFFF,t_70)

# 三，IPV4向IPV6过渡

### 1、IPv6/IPv4双协议栈技术 

　　双栈机制就是使IPv6网络节点具有一个IPv4栈和一个IPv6栈，同时支持IPv4和IPv6协议。IPv6和IPv4是功能相近的网络层协议，两者都应用于相同的物理平台，并承载相同的传输层协议TCP或UDP，如果一台主机同时支持IPv6和IPv4协议，那么该主机就可以和仅支持IPv4或IPv6协议的主机通信。

### 2、隧道技术 

隧道机制就是必要时将IPv6数据包作为数据封装在IPv4数据包里，使IPv6数据包能在已有的IPv4基础设施（主要是指IPv4路由器）上传输的机制。随着IPv6的发展，出现了一些运行IPv4协议的骨干网络隔离开的局部IPv6网络，为了实现这些IPv6网络之间的通信，必须采用隧道技术。隧道对于源站点和目的站点是透明的，在隧道的入口处，路由器将IPv6的数据分组封装在IPv4中，该IPv4分组的源地址和目的地址分别是隧道入口和出口的IPv4地址，在隧道出口处，再将IPv6分组取出转发给目的站点。隧道技术的优点在于隧道的透明性，IPv6主机之间的通信可以忽略隧道的存在，隧道只起到物理通道的作用。隧道技术在IPv4向IPv6演进的初期应用非常广泛。但是，隧道技术不能实现IPv4主机和IPv6主机之间的通信

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190521004935528.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTkyMjI4OQ==,size_16,color_FFFFFF,t_70)

### 3、网络地址转换技术（NAT技术）

　　网络地址转换（Network Address Translator，NAT）技术是将IPv4地址和IPv6地址分别看作内部地址和全局地址，或者相反。例如，内部的IPv4主机要和外部的IPv6主机通信时，在NAT服务器中将IPv4地址（相当于内部地址）变换成IPv6地址（相当于全局地址），服务器维护一个IPv4与IPv6地址的映射表。反之，当内部的IPv6主机和外部的IPv4主机进行通信时，则IPv6主机映射成内部地址，IPv4主机映射成全局地址。NAT技术可以解决IPv4主机和IPv6主机之间的互通问题

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190521005153113.png)

