# 分层次的路由选择协议

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190520014121605.png)

## 1.内部网关协议

在一个自治系统内部使用的路由选择协议，与互联网中的其他自治系统选用什么路由协议无关

### RIP协议

#### 概念
>RIP（Routing Information Protocol）翻译为路由信息协议，是基于距离矢量算法的路由协议，使用跳数作为计量标准。在带宽、配置和管理方面要求较低，主要适用于较小规模的网络中。

#### 和哪些路由器交换信息
仅仅和相邻的路由器交换信息，如果两个路由器之间的通信不需要经过另一个路由器，那么这两个路由器就是相邻的，不相邻的路由器不能交换信息

#### 交换什么信息
交换的信息是路由器的路由表（该路由器到其自治系统中所有网络的最短距离，以及到每个网络应该经过的下一个路由器）

#### 在什么时候交换信息
按照固定时间间隔交换路由信息


#### 工作示意图

<iframe height=500 width=500 src="http://hiphotos.baidu.com/feed/pic/item/023b5bb5c9ea15ce335392b2ba003af33b87b2cf.jpg">
</iframe>


#### 原理

距离向量算法

#### 算法描述

![在这里插入图片描述](https://img-blog.csdnimg.cn/20190520110508363.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80MTkyMjI4OQ==,size_16,color_FFFFFF,t_70)

#### 特点

* 好消息传播的快，坏消息传播的慢（当网络出现故障时，要经过比较长的时间才能将此信息发出传送到所有的路由器

* 实现简单，开销小

### OSPF协议

#### 概念
>    Open Shortest Path First, 开放最短路径优先协议，是一种开源的使用最短路径优先（SPF）算法的内部网关协议（IGP）。常用于路由器的动态选路。


#### 和哪些路由器交换信息

向本自治系统所有的路由器发送信息，路由器通过所有输出端口向所有相邻的路由器发送信息，每一个相邻的路由器又再将此信息发送给所有相邻的路由器

#### 交换什么信息
交换的信息是该路由器相邻的所有的路由器的链路状态


#### 在什么时候交换信息
只有链路状态发生变化时才交换信息

#### 原理

Dijkstra最短路径算法

#### 工作过程描述

当链路状态发生变化到链路状态信息交换完成后，每一个路由器都有整个区域网络的所有路由器的链路状态信息，此时在通过最短路径算法对这些信息进行处理，从而每个路由器都知道到达所有路由器的最短链路

#### 特点

* 适用于大规模网络;因为(1)路由器仅仅交换各自的邻居关系-链路状态 (LSA),而不是整个拓扑结构或路由表；(2)LSA的大小只与直接相连邻居路由器数有关,而与整个区域路由器数量无关。

* 链路状态信息主要包括两项：邻居路由器+到邻居代价；代价由管理员根据应用需求确定：距离、费用、延迟、带宽等。

* 路由器独自利用各自的LSD(网络拓扑结构)计算最短路径树,不依赖其他路由器计算结果,收敛(convergence)速度快; 路由信息不可能构成路由环路。

* 只有当网络拓扑结构发生变化，即链路状态发生变化时，路由器才向本区域内其他路由器广播发送变化后的链路状态信息；

## 2.外部网关协议

不同自治系统交互的协议

### BGP协议

#### 概念

>BGP是自治系统间的路由协议，BGP交换的网络可达性信息提供了足够的信息来检测路由回路并根据性能优先和策略约束对路由进行决策。


